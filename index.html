<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindos - Your Modern E-commerce Store</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            color: #333;
            background-image: url('images/background.jpg');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            /* REMOVE display: flex and flex-direction */
        }

        /* Overlay for better text readability on top of the background image */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(242, 239, 245, 0.26); /* Lighter tint */
            z-index: -1;
        }

        .container {
            max-width: 1200px;
        }
        .product-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            background-image: linear-gradient(to right, #6366f1, #8b5cf6);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background-image: linear-gradient(to right, #8b5cf6, #6366f1);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        .btn-secondary {
            background-color: #e2e8f0;
            color: #4a5568;
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background-color: #cbd5e0;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.6);
        }
        /* Style for the Three.js canvas */
        #tryOnCanvas {
            display: block;
            margin: 0 auto;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            background-color: #f9fafb;
        }
        /* Custom styles for select dropdown */
        .custom-select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='currentColor'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }


        .category-button {
            @apply px-4 py-2 rounded-full font-medium text-sm transition duration-300;
            @apply bg-gray-200 text-gray-700 hover:bg-indigo-100 hover:text-indigo-700;
        }
        .category-button.active {
            @apply bg-indigo-600 text-white shadow-md;
        }

        
        /* Ensure main content has good spacing */
        main {
            display: flex;
            flex-direction: column;
            z-index: 0;
            position: relative;
            padding: 2rem 1.5rem;
        }
        @media (min-width: 640px) { /* sm breakpoint */
            main {
                padding: 2.5rem;
            }
        }
        @media (min-width: 1024px) { /* lg breakpoint */
            main {
                padding: 3rem;
            }
        }

        /* Styles for Feedback Cards and Profile Icon */
        .feedback-card {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            transform: rotateZ(0deg); /* Initial state */
        }
        .feedback-card:hover {
            transform: rotateZ(1deg); /* Subtle rotation on hover */
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        .profile-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #a78bfa; /* Default purple background */
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            flex-shrink: 0; /* Prevent shrinking */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white shadow-md py-4 px-6 sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <a href="#" class="text-3xl font-bold text-indigo-600" onclick="showPage('home')">Mindos</a>
            <nav class="flex items-center space-x-6">
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition duration-300 font-medium" onclick="showPage('home')">Home</a>
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition duration-300 font-medium" onclick="showPage('try-on')">Virtual Try-On</a>
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition duration-300 font-medium" onclick="showPage('about')">About Us</a>
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition duration-300 font-medium" onclick="showPage('feedback')">Feedback & Ratings</a>
                <button class="relative text-gray-700 hover:text-indigo-600 transition duration-300" onclick="showPage('cart')">
                    <i class="fas fa-shopping-cart text-xl"></i>
                    <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow container mx-auto p-6">

        <!-- Home Page -->
        <section id="home-page" class="page">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-8 text-center">Featured Products</h1>
            <div class="flex flex-wrap justify-center gap-4 mb-8">
                <button class="relative category-button group" style="font-weight: bold; font-size: large;">
                    All Products
                    <span class="absolute left-0 -bottom-1 w-0 h-0.5 bg-indigo-600 transition-all group-hover:w-full"></span>
                </button>
                <button class="relative category-button group" style="font-weight: bold; font-size: large;">
                    Men's Collection
                    <span class="absolute left-0 -bottom-1 w-0 h-0.5 bg-indigo-600 transition-all group-hover:w-full"></span>
                </button>
                <button class="relative category-button group" style="font-weight: bold; font-size: large;">
                    Women's Collection
                    <span class="absolute left-0 -bottom-1 w-0 h-0.5 bg-indigo-600 transition-all group-hover:w-full"></span>
                </button>
                <button class="relative category-button group" style="font-weight: bold; font-size: large;">
                    Furniture
                    <span class="absolute left-0 -bottom-1 w-0 h-0.5 bg-indigo-600 transition-all group-hover:w-full"></span>
                </button>
                <button class="relative category-button group" style="font-weight: bold; font-size: large;">
                    Electronics
                    <span class="absolute left-0 -bottom-1 w-0 h-0.5 bg-indigo-600 transition-all group-hover:w-full"></span>
                </button>
                <button class="relative category-button group" style="font-weight: bold; font-size: large;">
                    Home & Kitchen
                    <span class="absolute left-0 -bottom-1 w-0 h-0.5 bg-indigo-600 transition-all group-hover:w-full"></span>
                </button>
            </div>
            <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                <!-- Product cards will be injected here by JavaScript -->
            </div>

            <!-- Short About Section -->
            <div class="bg-white p-8 rounded-xl shadow-lg max-w-5xl mx-auto mt-16 mb-16 text-gray-700 leading-relaxed text-center">
                <h2 class="text-3xl font-bold text-indigo-600 mb-4">About Mindos</h2>
                <p class="mb-4">
                    Welcome to **Mindos**, your premier destination for modern and innovative products. We are passionate about bringing you the latest in technology, comfort, and style, all curated with a focus on quality and user experience. Our mission is to provide a seamless and enjoyable online shopping experience.
                </p>
                <a href="#" class="text-indigo-600 hover:underline font-medium" onclick="showPage('about')">Read More About Us &rarr;</a>
            </div>

            <!-- Featured Ratings Section -->
            <h2 class="text-4xl font-extrabold text-gray-800 mb-8 text-center">What Our Customers Say</h2>
            <div id="home-ratings-list" class="flex flex-wrap justify-center gap-6">
                <!-- Featured ratings will be injected here by JavaScript -->
            </div>
        </section>

        <!-- Cart Page -->
        <section id="cart-page" class="page hidden">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-8 text-center">Your Shopping Cart</h1>
            <div id="cart-items" class="bg-white p-6 rounded-xl shadow-lg mb-8">
                <!-- Cart items will be injected here by JavaScript -->
                <p id="empty-cart-message" class="text-gray-500 text-center text-lg hidden">Your cart is empty.</p>
            </div>
            <div class="flex flex-col md:flex-row justify-between items-center bg-white p-6 rounded-xl shadow-lg">
                <div class="text-2xl font-bold text-gray-800 mb-4 md:mb-0">Total: <span id="cart-total">$0.00</span></div>
                <button class="btn-primary text-white py-3 px-8 rounded-full font-semibold shadow-lg" onclick="showPage('checkout')">Proceed to Checkout</button>
            </div>
        </section>

        <!-- Checkout Page -->
        <section id="checkout-page" class="page hidden">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-8 text-center">Checkout</h1>
            <div class="bg-white p-8 rounded-xl shadow-lg max-w-2xl mx-auto">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Shipping Information</h2>
                <form id="checkout-form" class="space-y-6">
                    <div>
                        <label for="fullName" class="block text-gray-700 font-medium mb-2">Full Name</label>
                        <input type="text" id="fullName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label for="address" class="block text-gray-700 font-medium mb-2">Address</label>
                        <input type="text" id="address" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label for="city" class="block text-gray-700 font-medium mb-2">City</label>
                        <input type="text" id="city" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="zipCode" class="block text-gray-700 font-medium mb-2">Zip Code</label>
                            <input type="text" id="zipCode" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required>
                        </div>
                        <div>
                            <label for="country" class="block text-gray-700 font-medium mb-2">Country</label>
                            <input type="text" id="country" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required>
                        </div>
                    </div>

                    <h2 class="text-2xl font-bold text-gray-800 mb-6 mt-8">Payment Information</h2>
                    <div>
                        <label for="cardNumber" class="block text-gray-700 font-medium mb-2">Card Number</label>
                        <input type="text" id="cardNumber" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" placeholder="XXXX XXXX XXXX XXXX" required>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label for="expMonth" class="block text-gray-700 font-medium mb-2">Exp. Month</label>
                            <input type="text" id="expMonth" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" placeholder="MM" required>
                        </div>
                        <div>
                            <label for="expYear" class="block text-gray-700 font-medium mb-2">Exp. Year</label>
                            <input type="text" id="expYear" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" placeholder="YY" required>
                        </div>
                        <div>
                            <label for="cvv" class="block text-gray-700 font-medium mb-2">CVV</label>
                            <input type="text" id="cvv" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" placeholder="XXX" required>
                        </div>
                    </div>
                    <button type="submit" class="btn-primary text-white py-3 px-8 rounded-full font-semibold shadow-lg w-full mt-8">Place Order</button>
                </form>
            </div>
        </section>

        <!-- Virtual Try-On Page -->
        <section id="try-on-page" class="page hidden">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-8 text-center">Virtual Try-On Experience</h1>
            <div class="bg-white p-8 rounded-xl shadow-lg flex flex-col items-center">
                <p class="text-gray-700 text-lg mb-6 text-center">
                    Drag your mouse to rotate the virtual model and see how the item looks!
                </p>
                <div class="mb-6 w-full max-w-xs">
                    <label for="tryOnProductSelect" class="block text-gray-700 font-medium mb-2">Select an item to try on:</label>
                    <select id="tryOnProductSelect" class="custom-select w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" onchange="loadTryOnItemFromSelect()">
                        <option value="">-- Select Product --</option>
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>
                <canvas id="tryOnCanvas" class="w-full h-96 md:h-[600px]"></canvas>
            </div>
        </section>

        <!-- About Us Page -->
        <section id="about-page" class="page hidden">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-8 text-center">About Mindos</h1>
            <div class="bg-white p-8 rounded-xl shadow-lg max-w-3xl mx-auto text-gray-700 leading-relaxed">
                <p class="mb-4">
                    Welcome to **Mindos**, your premier destination for modern and innovative products. We are passionate about bringing you the latest in technology, comfort, and style, all curated with a focus on quality and user experience.
                </p>
                <p class="mb-4">
                    Our journey began with a simple vision: to create an online shopping experience that is as seamless and enjoyable as the products we offer. We believe in transparency, customer satisfaction, and continuous improvement. Every item in our collection is hand-picked to ensure it meets our high standards of design, functionality, and durability.
                </p>
                <p class="mb-4">
                    At Mindos, we're not just selling products; we're building a community of discerning shoppers who appreciate thoughtful design and cutting-edge features. We are constantly updating our inventory to reflect the latest trends and innovations, ensuring you always have access to the best the market has to offer.
                </p>
                <p>
                    Thank you for choosing Mindos. We hope you enjoy your shopping experience and find exactly what you're looking for!
                </p>
                <div class="mt-8 text-center text-indigo-600 font-semibold">
                    <p>Contact us at: support@mindos.com</p>
                    <p>Follow us on: <i class="fab fa-facebook-f mx-2"></i> <i class="fab fa-twitter mx-2"></i> <i class="fab fa-instagram mx-2"></i></p>
                </div>
            </div>
        </section>

        <!-- Feedback & Ratings Page -->
        <section id="feedback-page" class="page hidden">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-8 text-center">Share Your Feedback</h1>
            <div class="bg-white p-8 rounded-xl shadow-lg max-w-2xl mx-auto">
                <p class="text-gray-700 mb-6 text-center">We'd love to hear your thoughts and suggestions!</p>
                <form id="feedback-form" class="space-y-6">
                    <div>
                        <label for="feedbackName" class="block text-gray-700 font-medium mb-2">Your Name</label>
                        <input type="text" id="feedbackName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label for="feedbackEmail" class="block text-gray-700 font-medium mb-2">Your Email</label>
                        <input type="email" id="feedbackEmail" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label for="feedbackRating" class="block text-gray-700 font-medium mb-2">Overall Rating</label>
                        <select id="feedbackRating" class="custom-select w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required>
                            <option value="">-- Select Rating --</option>
                            <option value="5">5 Stars - Excellent</option>
                            <option value="4">4 Stars - Very Good</option>
                            <option value="3">3 Stars - Good</option>
                            <option value="2">2 Stars - Fair</option>
                            <option value="1">1 Star - Poor</option>
                        </select>
                    </div>
                    <div>
                        <label for="feedbackComments" class="block text-gray-700 font-medium mb-2">Comments</label>
                        <textarea id="feedbackComments" rows="5" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" placeholder="Tell us what you think..."></textarea>
                    </div>
                    <button type="submit" class="btn-primary text-white py-3 px-8 rounded-full font-semibold shadow-lg w-full mt-8">Submit Feedback</button>
                </form>
                <div id="feedback-list" class="mt-10 pt-6 border-t border-gray-200">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">Recent Feedback</h2>
                    <p id="no-feedback-message" class="text-gray-500 text-center hidden">No feedback yet. Be the first to share!</p>
                    <!-- Feedback items will be injected here -->
                </div>
            </div>
        </section>

    </main>

    <!-- Success/Error Message Modal -->
    <div id="message-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden modal-overlay">
        <div class="bg-white p-8 rounded-xl shadow-2xl max-w-sm w-full text-center transform scale-95 transition-transform duration-300 ease-out">
            <h3 id="modal-title" class="text-2xl font-bold mb-4 text-gray-800"></h3>
            <p id="modal-message" class="text-gray-700 mb-6"></p>
            <button class="btn-primary text-white py-2 px-6 rounded-full font-semibold" onclick="closeModal()">OK</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-auto">
        <div class="container mx-auto text-center text-gray-400">
            <p class="mb-4">&copy; 2025 Mindos. All rights reserved.</p>
            <div class="flex justify-center space-x-6 text-2xl">
                <a href="https://facebook.com" target="_blank" class="text-gray-400 hover:text-indigo-400 transition duration-300">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://twitter.com" target="_blank" class="text-gray-400 hover:text-indigo-400 transition duration-300">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="https://instagram.com" target="_blank" class="text-gray-400 hover:text-indigo-400 transition duration-300">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://linkedin.com" target="_blank" class="text-gray-400 hover:text-indigo-400 transition duration-300">
                    <i class="fab fa-linkedin-in"></i>
                </a>
            </div>
        </div>
    </footer>

    <script>
        // --- Global State ---
        let products = [
            { id: 1, name: "Men's Casual T-Shirt", price: 25.00, image: "images/tshirtmen.jpg", description: "Comfortable and stylish cotton t-shirt for everyday wear.", category: "Men's Collection", tryOnModel: null },
            { id: 2, name: "Wireless Noise-Cancelling Headphones", price: 149.99, image: "images/headphone.jpg", description: "Immerse yourself in pure sound with these comfortable headphones.", category: "Electronics", tryOnModel: { type: 'headphone', color: 0x6366f1, scale: 0.8, positionY: 0.1 } },
            { id: 3, name: "Ergonomic Office Chair", price: 299.99, image: "images/chair.jpg", description: "Work in comfort and style with our premium ergonomic chair.", category: "Furniture", tryOnModel: null },
            { id: 4, name: "Portable Bluetooth Speaker", price: 79.99, image: "images/speaker.jpg", description: "Enjoy high-quality audio on the go with this compact speaker.", category: "Electronics", tryOnModel: null },
            { id: 5, name: "Stylish Smartwatch", price: 199.99, image: "images/smartwatch.jpg", description: "Stay connected and track your fitness with this elegant smartwatch.", category: "Electronics", tryOnModel: { type: 'sphere', color: 0x8b5cf6, scale: 0.3, positionY: 0.8 } },
            { id: 6, name: "Smart Home Hub", price: 129.99, image: "images/homehub.jpg", description: "Control all your smart devices from one central hub.", category: "Electronics", tryOnModel: null },
            { id: 7, name: "Espresso Machine", price: 219.99, image: "images/expresso.jpg", description: "Brew the perfect espresso at home with ease.", category: "Home & Kitchen", tryOnModel: null },
            { id: 8, name: "Mechanical Gaming Keyboard", price: 99.99, image: "images/keyboard.jpg", description: "Responsive mechanical keys for a superior gaming experience.", category: "Electronics", tryOnModel: null },
            { id: 9, name: "Classic Sunglasses", price: 49.99, image: "images/sunglassesjpg.jpg", description: "Timeless style and UV protection for your eyes.", category: "Men's Collection", tryOnModel: { type: 'glasses', color: 0x34d399, scale: 1, positionY: 0.1, positionZ: 0.8 } },
            { id: 10, name: "Baseball Cap", price: 29.99, image: "images/cap.jpg", description: "Sporty and comfortable, perfect for any outdoor activity.", category: "Men's Collection", tryOnModel: { type: 'hat', color: 0xef4444, scale: 1, positionY: 1.0 } },
            { id: 11, name: "Women's Silk Scarf", price: 39.99, image: "images/scarf.jpg", description: "Add a touch of elegance to your outfit.", category: "Women's Collection", tryOnModel: { type: 'torus', color: 0xf97316, scale: 0.6, positionY: -0.5 } },
            { id: 12, name: "Fitness Tracker Band", price: 79.99, image: "images/band.jpg", description: "Monitor your health and activity with precision.", category: "Electronics", tryOnModel: { type: 'cylinder', color: 0x22c55e, scale: 0.2, positionY: 0.5, rotationX: Math.PI / 2 } },
            { id: 13, name: "Modern Desk Lamp", price: 59.99, image: "images/lamp.jpg", description: "Illuminate your workspace with this sleek and adjustable lamp.", category: "Furniture", tryOnModel: null },
            { id: 14, name: "Comfortable Sofa", price: 799.99, image: "images/sofa.jpg", description: "Relax in ultimate comfort with our plush and modern sofa.", category: "Furniture", tryOnModel: null },
            { id: 15, name: "Elegant Evening Dress", price: 120.00, image: "images/dress.jpg", description: "A stunning dress for any special occasion.", category: "Women's Collection", tryOnModel: null },
            { id: 16, name: "Men's Leather Wallet", price: 45.00, image: "images/wallet.jpg", description: "Durable and stylish leather wallet with multiple compartments.", category: "Men's Collection", tryOnModel: null },
            { id: 17, name: "Women's Summer Hat", price: 35.00, image: "images/hat.jpg", description: "Lightweight and fashionable hat for sunny days.", category: "Women's Collection", tryOnModel: { type: 'hat', color: 0xfca5a5, scale: 1, positionY: 1.0 } },
            { id: 18, name: "Men's Formal Shirt", price: 55.00, image: "images/shirt.jpg", description: "Crisp and comfortable shirt perfect for office or events.", category: "Men's Collection", tryOnModel: null },
            { id: 19, name: "Women's Handbag", price: 85.00, image: "images/handbag.jpg", description: "Spacious and elegant handbag for everyday essentials.", category: "Women's Collection", tryOnModel: null },
            { id: 20, name: "Smart Vacuum Cleaner", price: 349.99, image: "images/vacuumcleaner.jpg", description: "Effortlessly clean your home with this intelligent robot vacuum.", category: "Home & Kitchen", tryOnModel: null },
            { id: 21, name: "Men's Running Shoes", price: 75.00, image: "images/runningshoes.jpg", description: "Lightweight and supportive shoes for your daily runs.", category: "Men's Collection", tryOnModel: null },
            { id: 22, name: "Women's Yoga Pants", price: 40.00, image: "images/legging.jpg", description: "Comfortable and flexible yoga pants for your workout.", category: "Women's Collection", tryOnModel: null },
            { id: 23, name: "Bookshelf", price: 150.00, image: "images/bookshelf.jpg", description: "Stylish and sturdy bookshelf for your living room.", category: "Furniture", tryOnModel: null },
            { id: 24, name: "Smart Coffee Mug", price: 45.00, image: "images/coffeemug.jpg", description: "Keep your coffee at the perfect temperature all day.", category: "Home & Kitchen", tryOnModel: null },
            { id: 25, name: "Luxury Sectional Sofa", price: 1299.99, image: "images/luxury-sectional-sofa.jpg", description: "Spacious and luxurious sectional sofa for ultimate living room comfort.", category: "Furniture", tryOnModel: null },
            { id: 26, name: "Mid-Century Modern Sofa", price: 899.99, image: "images/mid-century-sofa.jpg", description: "A stylish sofa with a timeless design, perfect for any contemporary space.", category: "Furniture", tryOnModel: null },
            { id: 27, name: "Compact Apartment Sofa", price: 549.99, image: "images/compact-sofa.jpg", description: "Ideal for smaller spaces, this sofa offers comfort without compromising on style.", category: "Furniture", tryOnModel: null },
            { id: 28, name: "King Size Platform Bed", price: 699.99, image: "images/king-bed.jpg", description: "A sturdy and elegant king size platform bed, perfect for a master bedroom.", category: "Furniture", tryOnModel: null }
        ];

        // Assign a default tryOnModel to products that don't have one
        products.forEach(product => {
            if (!product.tryOnModel) {
                // Assign a generic sphere model for products without a specific 3D model
                product.tryOnModel = { type: 'sphere', color: 0x888888, scale: 0.3, positionY: 0.8 };
            }
        });

        let cart = [];
        // Pre-populated feedback entries
        let feedbackEntries = [
            { name: "Alice Smith", email: "alice@example.com", rating: 5, comments: "Absolutely love the range of products! The virtual try-on is a game changer.", date: "07/01/2025" },
            { name: "Bob Johnson", email: "bob@example.com", rating: 4, comments: "Great website design and easy to navigate. Shipping was fast.", date: "06/28/2025" },
            { name: "Charlie Brown", email: "charlie@example.com", rating: 5, comments: "Mindos has become my go-to for electronics. Highly recommend!", date: "06/25/2025" },
            { name: "Diana Prince", email: "diana@example.com", rating: 3, comments: "Good selection, but I wish there were more detailed product descriptions.", date: "06/20/2025" }
        ];

        // --- DOM Elements ---
        const productListDiv = document.getElementById('product-list');
        const cartItemsDiv = document.getElementById('cart-items');
        const cartTotalSpan = document.getElementById('cart-total');
        const cartCountSpan = document.getElementById('cart-count');
        const emptyCartMessage = document.getElementById('empty-cart-message');
        const checkoutForm = document.getElementById('checkout-form');
        const messageModal = document.getElementById('message-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalMessage = document.getElementById('modal-message');
        const tryOnProductSelect = document.getElementById('tryOnProductSelect');
        const feedbackForm = document.getElementById('feedback-form');
        const feedbackListDiv = document.getElementById('feedback-list');
        const noFeedbackMessage = document.getElementById('no-feedback-message');
        const homeRatingsListDiv = document.getElementById('home-ratings-list'); // New DOM element for home page ratings


        // --- Page Navigation ---
        function showPage(pageId, productIdToTryOn = null) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('hidden');
            });
            document.getElementById(`${pageId}-page`).classList.remove('hidden');

            // Specific actions for each page
            if (pageId === 'home') {
                // Reset category filter to "All Products" when navigating to home
                filterProducts('All', document.querySelector('.category-button[data-category="All"]'));
                renderHomeRatings(); // Render featured ratings on the home page
            } else if (pageId === 'cart') {
                renderCart();
            } else if (pageId === 'try-on') {
                initThreeJS(); // Initialize Three.js when navigating to try-on page
                populateTryOnProductSelect(); // Populate the dropdown
                if (productIdToTryOn) {
                    tryOnProductSelect.value = productIdToTryOn;
                    loadTryOnItemFromSelect();
                } else {
                    // Clear any previously loaded item if no specific product is selected
                    if (currentTryOnItemModel) {
                        headModel.remove(currentTryOnItemModel);
                        currentTryOnItemModel = null;
                    }
                    tryOnProductSelect.value = ""; // Reset dropdown
                }
            } else if (pageId === 'feedback') {
                renderFeedback();
            }
        }

        // --- Product Filtering and Rendering ---
        function filterProducts(category, clickedButton) {
            // Remove active class from all category buttons
            document.querySelectorAll('.category-button').forEach(button => {
                button.classList.remove('active');
            });
            // Add active class to the clicked button
            if (clickedButton) {
                clickedButton.classList.add('active');
            }

            const filteredProducts = category === 'All' ? products : products.filter(p => p.category === category);
            renderProducts(filteredProducts);
        }

        function renderProducts(productsToRender) {
            productListDiv.innerHTML = ''; // Clear existing products
            productsToRender.forEach(product => {
                const productCard = `
                    <div class="product-card bg-white rounded-xl shadow-lg overflow-hidden flex flex-col justify-between p-6">
                        <img src="${product.image}" alt="${product.name}" class="w-full aspect-square object-cover rounded-xl bg-white mb-4">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">${product.name}</h3>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-3">${product.description}</p>
                        <div class="flex justify-between items-center mt-auto">
                            <span class="text-2xl font-bold text-indigo-600">$${product.price.toFixed(2)}</span>
                            <div class="flex flex-col space-y-2">
                                <button class="btn-primary text-white py-2 px-5 rounded-full font-semibold text-sm" onclick="addToCart(${product.id})">
                                    Add to Cart
                                </button>
                                <button class="btn-secondary py-2 px-5 rounded-full font-semibold text-sm" onclick="showPage('try-on', ${product.id})">
                                    Try On Virtually
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                productListDiv.innerHTML += productCard;
            });
        }

        // --- Cart Functions ---
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ ...product, quantity: 1 });
                }
                updateCartUI();
                showModal('Success!', `${product.name} added to cart.`, 'success');
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartUI();
        }

        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCartUI();
                }
            }
        }

        function updateCartUI() {
            cartItemsDiv.innerHTML = '';
            let total = 0;

            if (cart.length === 0) {
                emptyCartMessage.classList.remove('hidden');
            } else {
                emptyCartMessage.classList.add('hidden');
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    const cartItemHtml = `
                        <div class="flex items-center justify-between border-b border-gray-200 py-4 last:border-b-0">
                            <div class="flex items-center">
                                <img src="${item.image}" alt="${item.name}" class="w-20 h-20 object-cover rounded-lg mr-4">
                                <div>
                                    <h4 class="text-lg font-medium text-gray-800">${item.name}</h4>
                                    <p class="text-gray-600">$${item.price.toFixed(2)}</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <button class="btn-secondary w-8 h-8 rounded-full flex items-center justify-center text-lg" onclick="updateQuantity(${item.id}, -1)">-</button>
                                <span class="text-lg font-semibold text-gray-800">${item.quantity}</span>
                                <button class="btn-secondary w-8 h-8 rounded-full flex items-center justify-center text-lg" onclick="updateQuantity(${item.id}, 1)">+</button>
                            </div>
                            <div class="text-xl font-bold text-indigo-600">$${itemTotal.toFixed(2)}</div>
                            <button class="text-red-500 hover:text-red-700 transition duration-300" onclick="removeFromCart(${item.id})">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    `;
                    cartItemsDiv.innerHTML += cartItemHtml;
                });
            }

            cartTotalSpan.textContent = `$${total.toFixed(2)}`;
            cartCountSpan.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
        }

        function renderCart() {
            updateCartUI();
        }

        // --- Checkout Form Submission (Simulated Payment) ---
        checkoutForm.addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission

            // Simulate payment processing
            const isPaymentSuccessful = Math.random() > 0.1; // 90% chance of success

            if (isPaymentSuccessful) {
                showModal('Order Placed!', 'Your order has been successfully placed. Thank you for shopping with us!', 'success');
                cart = []; // Clear cart after successful order
                updateCartUI();
                checkoutForm.reset(); // Clear form fields
                setTimeout(() => showPage('home'), 2000); // Redirect to home after 2 seconds
            } else {
                showModal('Payment Failed!', 'There was an issue processing your payment. Please try again or use a different card.', 'error');
            }
        });

        // --- Modal Functions ---
        function showModal(title, message, type) {
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            if (type === 'success') {
                modalTitle.classList.remove('text-red-600');
                modalTitle.classList.add('text-green-600');
            } else if (type === 'error') {
                modalTitle.classList.remove('text-green-600');
                modalTitle.classList.add('text-red-600');
            }
            messageModal.classList.remove('hidden');
            // Animate modal in
            setTimeout(() => {
                messageModal.querySelector('div').classList.remove('scale-95');
                messageModal.querySelector('div').classList.add('scale-100');
            }, 50);
        }

        function closeModal() {
            // Animate modal out
            messageModal.querySelector('div').classList.remove('scale-100');
            messageModal.querySelector('div').classList.add('scale-95');
            setTimeout(() => {
                messageModal.classList.add('hidden');
            }, 300); // Match transition duration
        }

        // --- Cognitive AI: User Behavior Tracking ---
        let userBehavior = {
            scrollDepth: 0,
            clicks: 0,
            timeSpent: 0
        };

        let timeStart = Date.now();

        window.addEventListener("scroll", () => {
            const scrolled = window.scrollY + window.innerHeight;
            const totalHeight = document.body.offsetHeight;
            userBehavior.scrollDepth = Math.max(
                userBehavior.scrollDepth,
                Math.floor((scrolled / totalHeight) * 100)
            );
        });

        document.addEventListener("click", () => {
            userBehavior.clicks++;
        });

        window.addEventListener("beforeunload", () => {
            userBehavior.timeSpent = Math.floor((Date.now() - timeStart) / 1000);
            localStorage.setItem("userBehavior", JSON.stringify(userBehavior));
        });

        // --- Cognitive Style Detection ---
        function detectUserCognitiveStyle() {
            const data = JSON.parse(localStorage.getItem("userBehavior")) || {};
            console.log("🧠 User Behavior Data:", data);

            let style;
            if (data.scrollDepth > 80 && data.clicks > 10 && data.timeSpent > 60) {
                style = "Detailed Explorer";
            } else if (data.clicks < 5 && data.scrollDepth < 40) {
                style = "Quick Scanner";
            } else {
                style = "Average";
            }

            localStorage.setItem("userStyle", style); // persist style
            console.log("🧠 Cognitive Style Detected:", style);
            return style;
        }

        // --- UI Adaptation ---
        function adaptUIForUser(style) {
            console.log(`🧠 UI Adapting for: ${style}`);

            if (style === "Quick Scanner") {
                document.body.style.backgroundColor = "#fff7ed";
                document.body.style.fontSize = "0.95rem";
                document.querySelectorAll(".product-card").forEach(card => {
                    card.style.border = "2px solid #f87171";
                });
            } else if (style === "Detailed Explorer") {
                document.body.style.backgroundColor = "#ecfeff";
                document.body.style.fontSize = "1.1rem";
                document.querySelectorAll(".product-card").forEach(card => {
                    card.style.boxShadow = "0 0 10px rgba(59,130,246,0.5)";
                });
            }
        }

        // --- Product Sorting by Style ---
        function sortProductsByStyle(products, style) {
            if (style === "Quick Scanner") {
                return products.sort((a, b) => a.price - b.price);
            } else if (style === "Detailed Explorer") {
                return products.sort((a, b) => {
                    if (a.category === "Electronics" && b.category !== "Electronics") return -1;
                    if (b.category === "Electronics" && a.category !== "Electronics") return 1;
                    return b.price - a.price;
                });
            }
            return products;
        }

        // --- Three.js Virtual Try-On ---
        let scene, camera, renderer, headModel;
        let currentTryOnItemModel = null; // To keep track of the currently loaded item's 3D model

        function initThreeJS() {
            const canvas = document.getElementById('tryOnCanvas');
            if (!canvas) {
                console.error("Try-on canvas not found.");
                return;
            }

            // If Three.js is already initialized, just return
            if (scene && camera && renderer) {
                // Clear any existing try-on item if present
                if (currentTryOnItemModel) {
                    headModel.remove(currentTryOnItemModel);
                    currentTryOnItemModel = null;
                }
                return;
            }

            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf9fafb); // Light background

            // Camera
            camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
            camera.position.set(0, 0, 3); // Position camera

            // Renderer
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);

            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.7); // Soft white light
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
            directionalLight.position.set(5, 5, 5).normalize();
            scene.add(directionalLight);

            // Basic Avatar/Head Model (a simple sphere for demonstration)
            const headGeometry = new THREE.SphereGeometry(0.8, 32, 32);
            const headMaterial = new THREE.MeshPhongMaterial({ color: 0xcccccc }); // Light gray
            headModel = new THREE.Mesh(headGeometry, headMaterial);
            headModel.position.y = 0; // Center the head
            scene.add(headModel);

            // Mouse controls for rotation
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };

            canvas.addEventListener('mousedown', (e) => {
                isDragging = true;
                previousMousePosition = { x: e.clientX, y: e.clientY };
            });

            canvas.addEventListener('mouseup', () => {
                isDragging = false;
            });

            canvas.addEventListener('mousemove', (e) => {
                if (!isDragging) return;

                const deltaMove = {
                    x: e.clientX - previousMousePosition.x,
                    y: e.clientY - previousMousePosition.y
                };

                // Rotate the head model and any attached item
                const rotationSpeed = 0.005;
                headModel.rotation.y += deltaMove.x * rotationSpeed;
                headModel.rotation.x += deltaMove.y * rotationSpeed;

                // Clamp X rotation to prevent flipping
                headModel.rotation.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, headModel.rotation.x));

                previousMousePosition = { x: e.clientX, y: e.clientY };
            });

            // Handle window resize
            window.addEventListener('resize', onWindowResize, false);
            function onWindowResize() {
                if (canvas) { // Check if canvas exists before accessing properties
                    camera.aspect = canvas.clientWidth / canvas.clientHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(canvas.clientWidth, canvas.clientHeight);
                }
            }

            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }
            animate(); // Start the animation loop
        }

        // Populates the dropdown with products that have a tryOnModel
        function populateTryOnProductSelect() {
            tryOnProductSelect.innerHTML = '<option value="">-- Select Product --</option>'; // Clear and add default
            products.forEach(product => {
                if (product.tryOnModel) {
                    const option = document.createElement('option');
                    option.value = product.id;
                    option.textContent = product.name;
                    tryOnProductSelect.appendChild(option);
                }
            });
        }

        // Loads a try-on item based on the selected product from the dropdown
        function loadTryOnItemFromSelect() {
            const selectedProductId = tryOnProductSelect.value;
            if (!selectedProductId) {
                // If nothing is selected, clear the item
                if (currentTryOnItemModel) {
                    headModel.remove(currentTryOnItemModel);
                    currentTryOnItemModel = null;
                }
                return;
            }

            const product = products.find(p => p.id === parseInt(selectedProductId));
            if (product && product.tryOnModel) {
                loadTryOnItem(product.tryOnModel);
            } else {
                // If product not found or no tryOnModel, clear item
                if (currentTryOnItemModel) {
                    headModel.remove(currentTryOnItemModel);
                    currentTryOnItemModel = null;
                }
            }
        }

        // Dynamically creates and attaches a 3D model based on item properties
        function loadTryOnItem(modelProps) {
            // Remove previous item if any
            if (currentTryOnItemModel) {
                headModel.remove(currentTryOnItemModel);
                currentTryOnItemModel = null;
            }

            let geometry;
            let material = new THREE.MeshPhongMaterial({ color: modelProps.color || 0xaaaaaa });
            let itemMesh;

            switch (modelProps.type) {
                case 'sphere':
                    geometry = new THREE.SphereGeometry(0.5, 32, 32);
                    itemMesh = new THREE.Mesh(geometry, material);
                    break;
                case 'cylinder':
                    geometry = new THREE.CylinderGeometry(0.5, 0.5, 1, 32);
                    itemMesh = new THREE.Mesh(geometry, material);
                    break;
                case 'box':
                    geometry = new THREE.BoxGeometry(1, 1, 1);
                    itemMesh = new THREE.Mesh(geometry, material);
                    break;
                case 'hat': // Custom hat model
                    geometry = new THREE.CylinderGeometry(0.6, 0.8, 0.4, 32);
                    itemMesh = new THREE.Mesh(geometry, material);
                    itemMesh.position.y = 1.0; // Position above the head
                    break;
                case 'glasses': // Custom glasses model
                    const frameMaterial = new THREE.MeshPhongMaterial({ color: modelProps.color || 0x333333 });
                    const lensMaterial = new THREE.MeshPhongMaterial({ color: 0xADD8E6, transparent: true, opacity: 0.5 });

                    const leftLens = new THREE.Mesh(new THREE.SphereGeometry(0.2, 16, 16), lensMaterial);
                    leftLens.position.set(-0.3, 0.1, 0.8);

                    const rightLens = new THREE.Mesh(new THREE.SphereGeometry(0.2, 16, 16), lensMaterial);
                    rightLens.position.set(0.3, 0.1, 0.8);

                    const bridge = new THREE.Mesh(new THREE.BoxGeometry(0.4, 0.05, 0.05), frameMaterial);
                    bridge.position.set(0, 0.1, 0.8);

                    itemMesh = new THREE.Group();
                    itemMesh.add(leftLens);
                    itemMesh.add(rightLens);
                    itemMesh.add(bridge);
                    break;
                case 'headphone': // Simple headphone model
                    const bandMaterial = new THREE.MeshPhongMaterial({ color: modelProps.color || 0x333333 });
                    const earCupMaterial = new THREE.MeshPhongMaterial({ color: modelProps.color || 0x555555 });

                    const band = new THREE.Mesh(new THREE.TorusGeometry(0.8, 0.05, 16, 100, Math.PI), bandMaterial);
                    band.rotation.x = Math.PI / 2;
                    band.position.y = 0.8;

                    const leftEarCup = new THREE.Mesh(new THREE.SphereGeometry(0.2, 32, 32), earCupMaterial);
                    leftEarCup.position.set(-0.8, 0.8, 0);

                    const rightEarCup = new THREE.Mesh(new THREE.SphereGeometry(0.2, 32, 32), earCupMaterial);
                    rightEarCup.position.set(0.8, 0.8, 0);

                    itemMesh = new THREE.Group();
                    itemMesh.add(band);
                    itemMesh.add(leftEarCup);
                    itemMesh.add(rightEarCup);
                    itemMesh.rotation.x = Math.PI / 2; // Rotate to fit head
                    itemMesh.position.y = 0.5; // Adjust position
                    break;
                case 'torus': // For scarf-like item
                    geometry = new THREE.TorusGeometry(0.6, 0.1, 16, 100);
                    itemMesh = new THREE.Mesh(geometry, material);
                    itemMesh.rotation.x = Math.PI / 2; // Orient horizontally
                    itemMesh.position.y = -0.5; // Around the neck
                    break;
                default:
                    console.warn("Unknown try-on model type:", modelProps.type);
                    return;
            }

            // Apply scaling and positioning if provided
            if (itemMesh) {
                if (modelProps.scale) {
                    itemMesh.scale.set(modelProps.scale, modelProps.scale, modelProps.scale);
                }
                if (modelProps.positionX !== undefined) itemMesh.position.x = modelProps.positionX;
                if (modelProps.positionY !== undefined) itemMesh.position.y = modelProps.positionY;
                if (modelProps.positionZ !== undefined) itemMesh.position.z = modelProps.positionZ;
                if (modelProps.rotationX !== undefined) itemMesh.rotation.x = modelProps.rotationX;
                if (modelProps.rotationY !== undefined) itemMesh.rotation.y = modelProps.rotationY;
                if (modelProps.rotationZ !== undefined) itemMesh.rotation.z = modelProps.rotationZ;

                headModel.add(itemMesh); // Attach item to the head model
                currentTryOnItemModel = itemMesh;
            }
        }

        // --- Feedback Functions ---
        feedbackForm.addEventListener('submit', function(event) {
            event.preventDefault();

            const name = document.getElementById('feedbackName').value;
            const email = document.getElementById('feedbackEmail').value;
            const rating = document.getElementById('feedbackRating').value;
            const comments = document.getElementById('feedbackComments').value;

            if (!name || !email || !rating) {
                showModal('Error', 'Please fill in all required feedback fields.', 'error');
                return;
            }

            const newFeedback = {
                name,
                email,
                rating: parseInt(rating),
                comments,
                date: new Date().toLocaleDateString()
            };

            feedbackEntries.unshift(newFeedback); // Add to the beginning
            renderFeedback();
            feedbackForm.reset();
            showModal('Thank You!', 'Your feedback has been submitted successfully.', 'success');
        });

        function renderFeedback() {
            feedbackListDiv.innerHTML = '<h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">Recent Feedback</h2>'; // Clear and re-add title
            if (feedbackEntries.length === 0) {
                noFeedbackMessage.classList.remove('hidden');
            } else {
                noFeedbackMessage.classList.add('hidden');
                feedbackEntries.forEach(entry => {
                    const stars = '⭐'.repeat(entry.rating);
                    // Get initials for the profile icon
                    const initials = entry.name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
                    const feedbackHtml = `
                        <div class="feedback-card bg-gray-50 p-4 rounded-lg shadow-sm mb-4">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center space-x-3">
                                    <div class="profile-icon">${initials}</div>
                                    <span class="font-semibold text-gray-800">${entry.name}</span>
                                </div>
                                <span class="text-sm text-gray-500">${entry.date}</span>
                            </div>
                            <div class="text-yellow-500 mb-2">${stars}</div>
                            <p class="text-gray-700">${entry.comments || 'No comments provided.'}</p>
                        </div>
                    `;
                    feedbackListDiv.innerHTML += feedbackHtml;
                });
            }
        }

        // --- Render Home Page Ratings ---
        function renderHomeRatings() {
            homeRatingsListDiv.innerHTML = ''; // Clear existing ratings

            // Display only the first 3 feedback entries for the home page
            const featuredRatings = feedbackEntries.slice(0, 3);

            if (featuredRatings.length === 0) {
                homeRatingsListDiv.innerHTML = '<p class="text-gray-500 text-center text-lg">No featured feedback yet.</p>';
            } else {
                featuredRatings.forEach(entry => {
                    const stars = '⭐'.repeat(entry.rating);
                    const initials = entry.name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
                    const feedbackHtml = `
                        <div class="feedback-card bg-white p-6 rounded-xl shadow-lg w-full sm:w-80 flex-shrink-0">
                            <div class="flex items-center space-x-3 mb-2">
                                <div class="profile-icon">${initials}</div>
                                <span class="font-semibold text-gray-800">${entry.name}</span>
                            </div>
                            <div class="text-yellow-500 mb-2">${stars}</div>
                            <p class="text-gray-700 text-sm line-clamp-3">${entry.comments || 'No comments provided.'}</p>
                        </div>
                    `;
                    homeRatingsListDiv.innerHTML += feedbackHtml;
                });
            }
        }


        // --- Initial Load ---
        window.onload = function () {
            const style = detectUserCognitiveStyle();
            adaptUIForUser(style);
            products = sortProductsByStyle(products, style); // re-sort based on style
            renderProducts(products); // force display of sorted products
            showPage('home');
            updateCartUI();
        };



    </script>
</body>
</html>
